function insertCode() {
    var agid_spid_enter = document.getElementById("agid-spid-enter"), panel_html = '\t\t<div id="agid-spid-button-anim">\t\t\t<div id="agid-spid-button-anim-base"></div>\t\t    <div id="agid-spid-button-anim-icon"></div>\t\t</div>\t\t\t<section id="agid-spid-panel-select" class="agid-spid-panel" aria-labelledby="agid-spid-enter-title-page" hidden>\t\t\t<header id="agid-spid-panel-header">                        <nav class="agid-spid-panel-back agid-spid-panel-element" aria-controls="agid-spid-panel-select">\t\t\t\t<div role="button">\t<a href="#" onclick="hidePanel(\'agid-spid-panel-select\')" class="agid-spid-button" >\t\t\t\t\t\t<img src="img/x-icon.svg" alt="Torna indietro">\t\t\t\t\t</a>\t\t\t\t</div></nav>\t\t\t\t<div class="agid-spid-panel-logo agid-spid-panel-element">\t\t\t\t\t<img aria-hidden="true" src="img/spid-logo-c-lb.svg" alt="Logo SPID">\t\t\t\t</div>                                \t\t\t</header>\t\t\t<div id="agid-spid-panel-content">\t\t\t\t<div class="agid-spid-panel-content-center">                                <div id ="agid-spid-enter-title-container" ><h1 id="agid-spid-enter-title-page">Scegli il tuo provider SPID</h1>                                </div> \t\t\t\t\t<div id="agid-spid-idp-list" class="agid-spid-row">';
    config.infocert.url && (panel_html += '<span class="agid-spid-col l3 m6 s6 xs12" role="button"><a href="' + config.infocert.url + '" class="agid-spid-idp-button agid-spid-idp-infocertid" title="' + config.infocert.title + '" style="background-image: url(\'img/idp-logos/' + config.infocert.logo + "')\"></a></span>"), 
    config.poste.url && (panel_html += '<span class="agid-spid-col l3 m6 s6 xs12" role="button"><a href="' + config.poste.url + '" class="agid-spid-idp-button agid-spid-idp-posteid" title="' + config.poste.title + '" style="background-image: url(\'img/idp-logos/' + config.poste.logo + "')\"></a></span>"), 
    config.tim.url && (panel_html += '<span class="agid-spid-col l3 m6 s6 xs12" role="button"><a href="' + config.tim.url + '" class="agid-spid-idp-button agid-spid-idp-timid" title="' + config.tim.title + '" style="background-image: url(\'img/idp-logos/' + config.tim.logo + "')\"></a></span>"), 
    config.sielte.url && (panel_html += '<span class="agid-spid-col l3 m6 s6 xs12" role="button"><a href="' + config.sielte.url + '" class="agid-spid-idp-button agid-spid-idp-sielteid" title="' + config.sielte.title + '" style="background-image: url(\'img/idp-logos/' + config.sielte.logo + "')\"></a></span>"), 
    config.aruba.url && (panel_html += '<span class="agid-spid-col l3 m6 s6 xs12" role="button"><a href="' + config.aruba.url + '" class="agid-spid-idp-button agid-spid-idp-arubaid" title="' + config.aruba.title + '" style="background-image: url(\'img/idp-logos/' + config.aruba.logo + "')\"></a></span>"), 
    config.newidp1.url && (panel_html += '<span class="agid-spid-col l3 m6 s6 xs12" role="button"><a href="' + config.newidp1.url + '" class="agid-spid-idp-button agid-spid-idp-dummy" title="' + config.newidp1.title + '" style="background-image: url(\'img/idp-logos/' + config.newidp1.logo + "')\"></a></span>"), 
    config.newidp2.url && (panel_html += '<span class="agid-spid-col l3 m6 s6 xs12" role="button"><a href="' + config.newidp2.url + '" class="agid-spid-idp-button agid-spid-idp-dummy" title="' + config.newidp2.title + '" style="background-image: url(\'img/idp-logos/' + config.newidp2.logo + "')\"></a></span>"), 
    config.newidp3.url && (panel_html += '<span class="agid-spid-col l3 m6 s6 xs12" role="button"><a href="' + config.newidp3.url + '" class="agid-spid-idp-button agid-spid-idp-dummy" title="' + config.newidp3.title + '" style="background-image: url(\'img/idp-logos/' + config.newidp3.logo + "')\"></a></span>"), 
    panel_html += '\t\t\t\t\t</div>\t\t\t\t<div id="agid-cancel-access-container">\t\t\t\t\t<a href="#"  onclick="hidePanel(\'agid-spid-panel-select\')">   <div id="agid-cancel-access-button" class="agid-transparent-button" role="button"><span>Annulla l\'accesso</span></div></a>\t\t\t\t</div >                                 <div id="agid-logo-container" aria-hidden="true">\t\t\t\t\t<img id="agid-logo" class="agid-logo" src="./img/agid-logo-bb-short.png" aria-hidden="true"/>\t\t\t\t</div > \t\t\t</div>                        </div>\t\t\t<footer id="agid-spid-panel-footer">                            <div id="agid-action-button-container">                                <a href="#"> <div id="nospid" class="agid-action-button" role="button"><span>Non hai SPID?</span></div></a>                                <a href="#"> <div id="cosaspid" class="agid-action-button" role="button"><span>Cos\'e SPID?</span></div></a>                            </div>                        </footer>\t\t</section>', 
    agid_spid_enter.innerHTML = panel_html, document.getElementById("nospid").addEventListener("click", function(ev) {
        openmodal("Non hai SPID?");
    }), document.getElementById("cosaspid").addEventListener("click", function(ev) {
        openmodal("Cos'Ã¨ SPID?");
    });
}

function insertButtonS() {
    var i, agid_spid_enter_button_xl = document.getElementsByClassName("agid-spid-enter-button-size-s");
    for (i = 0; i < agid_spid_enter_button_xl.length; i++) agid_spid_enter_button_xl[i].innerHTML = '\t\t\t\x3c!-- AGID - SPID BUTTON SMALL * begin * --\x3e\t\t\t<button class="agid-spid-enter agid-spid-enter-size-s" onclick="showPanel(\'agid-spid-panel-select\')">\t\t\t\t<span class="agid-spid-enter-icon"><img aria-hidden="true"  src="img/spid-ico-circle-bb.svg" onerror="this.src=\'img/spid-ico-circle-bb.png\'; this.onerror=null;" alt="Entra con SPID" /></span>\t\t\t\t<span class="agid-spid-enter-text">Entra con SPID</span>\t\t\t</button>\t\t\t\x3c!-- AGID - SPID BUTTON SMALL * end * --\x3e\t\t\t\t';
}

function insertButtonM() {
    var i, agid_spid_enter_button_xl = document.getElementsByClassName("agid-spid-enter-button-size-m");
    for (i = 0; i < agid_spid_enter_button_xl.length; i++) agid_spid_enter_button_xl[i].innerHTML = '\t\t\t\x3c!-- AGID - SPID BUTTON MEDIUM * begin * --\x3e\t\t\t<button class="agid-spid-enter agid-spid-enter-size-m" onclick="showPanel(\'agid-spid-panel-select\')">\t\t\t\t<span class="agid-spid-enter-icon"><img aria-hidden="true" src="img/spid-ico-circle-bb.svg" onerror="this.src=\'img/spid-ico-circle-bb.png\'; this.onerror=null;" alt="Entra con SPID" /></span>\t\t\t\t<span class="agid-spid-enter-text">Entra con SPID</span>\t\t\t</button>\t\t\t\x3c!-- AGID - SPID BUTTON MEDIUM * end * --\x3e\t\t\t';
}

function insertButtonL() {
    var i, agid_spid_enter_button_xl = document.getElementsByClassName("agid-spid-enter-button-size-l");
    for (i = 0; i < agid_spid_enter_button_xl.length; i++) agid_spid_enter_button_xl[i].innerHTML = '\t\t\t\x3c!-- AGID - SPID BUTTON LARGE * begin * --\x3e\t\t\t<button class="agid-spid-enter agid-spid-enter-size-l" onclick="showPanel(\'agid-spid-panel-select\')">\t\t\t\t<span class="agid-spid-enter-icon"><img aria-hidden="true"  src="img/spid-ico-circle-bb.svg" onerror="this.src=\'img/spid-ico-circle-bb.png\'; this.onerror=null;" alt="Entra con SPID" /></span>\t\t\t\t<span class="agid-spid-enter-text">Entra con SPID</span>\t\t\t</button>\t\t\t\x3c!-- AGID - SPID BUTTON LARGE * end * --\x3e\t\t\t';
}

function insertButtonXl() {
    var i, agid_spid_enter_button_xl = document.getElementsByClassName("agid-spid-enter-button-size-xl");
    for (i = 0; i < agid_spid_enter_button_xl.length; i++) agid_spid_enter_button_xl[i].innerHTML = '\t\t\t\x3c!-- AGID - SPID BUTTON EXTRALARGE * begin * --\x3e\t\t\t<button  class="agid-spid-enter agid-spid-enter-size-xl agid-spid-idp-list" onclick="showPanel(\'agid-spid-panel-select\')">\t\t\t\t<span aria-hidden="true" class="agid-spid-enter-icon"><img aria-hidden="true" src="img/spid-ico-circle-bb.svg" onerror="this.src=\'img/spid-ico-circle-bb.png\'; this.onerror=null;" alt="Entra con SPID" /></span>\t\t\t\t<span class="agid-spid-enter-text">Entra con SPID</span>\t\t\t</button>\t\t\t\x3c!-- AGID - SPID BUTTON EXTRALARGE * end * --\x3e\t\t\t\t';
}

function animate_element_in(e) {
    element = document.getElementById(e), element.style.display = "block", element.classList.remove(e + "-anim-in"), 
    element.classList.remove(e + "-anim-out"), element.classList.add(e + "-anim-in");
}

function animate_element_out(e) {
    element = document.getElementById(e), element.classList.remove(e + "-anim-in"), 
    element.classList.remove(e + "-anim-out"), element.classList.add(e + "-anim-out");
}

function showPanel(name) {
    for (shuffleIdp(), toshow = document.getElementById(name), toshow.removeAttribute("hidden"), 
    toshow.style.display = "block", buttons = document.getElementsByClassName("agid-spid-enter-button"), 
    z = 0; z < buttons.length; z++) buttons[z].style.display = "none", hiddenattribute = document.createAttribute("hidden"), 
    buttons[z].setAttributeNode(hiddenattribute);
    animate_element_in("agid-spid-button-anim"), animate_element_in("agid-spid-button-anim-base"), 
    animate_element_in("agid-spid-button-anim-icon"), animate_element_in("agid-spid-panel-select");
    var base = document.getElementById("agid-spid-button-anim-base"), panel = document.getElementById("agid-spid-button-anim");
    base.addEventListener("animationstart", function(e) {
        panel.style.display = "block", base.style.display = "block";
    }, !0), base.addEventListener("animationend", function(e) {
        panel.style.display = "block", base.style.display = "block";
    }, !0);
}

function hidePanel(name) {
    for (tohide = document.getElementById(name), hiddenattribute = document.createAttribute("hidden"), 
    tohide.setAttributeNode(hiddenattribute), tohide.style.display = "none", buttons = document.getElementsByClassName("agid-spid-enter-button"), 
    console.log(buttons), z = 0; z < buttons.length; z++) buttons[z].style.display = "block", 
    buttons[z].removeAttribute("hidden");
    animate_element_out("agid-spid-button-anim"), animate_element_out("agid-spid-button-anim-base"), 
    animate_element_out("agid-spid-button-anim-icon"), animate_element_out("agid-spid-panel-select");
    var base = document.getElementById("agid-spid-button-anim-base"), panel = document.getElementById("agid-spid-button-anim");
    base.addEventListener("animationstart", function(e) {
        panel.style.display = "block", base.style.display = "block";
    }, !0), base.addEventListener("animationend", function(e) {
        panel.style.display = "none", base.style.display = "none";
        var newone = base.cloneNode(!0);
        base.parentNode.replaceChild(newone, base);
    }, !0);
}

function shuffleIdp() {
    for (var ul = document.querySelector("#agid-spid-idp-list"), i = ul.children.length; i >= 0; i--) ul.appendChild(ul.children[Math.random() * i | 0]);
}

function agid_spid_enter() {
    insertCode(), insertButtonS(), insertButtonM(), insertButtonL(), insertButtonXl(), 
    document.addEventListener("keyup", function(e) {
        27 == e.keyCode && hidePanel("agid-spid-panel-select");
    });
}

function openmodal(text) {
    console.log("Openmodal " + text);
    var modal = document.getElementById("infomodal");
    modal.innerHTML = '<div class="modal-content"><span id="closemodalbutton" class="close" >&times;</span><p>' + text + "</p></div>", 
    modal.style.display = "block";
    var span = document.getElementById("closemodalbutton");
    span.addEventListener("click", function(ev) {
        closemodal();
    }), console.log(span);
}

function closemodal() {
    console.log("Closingmodal ");
    var modal = document.getElementById("infomodal");
    modal.style.display = "none", modal.innerHTML = "";
}

var config = {
    aruba: {
        url: "http://aruba",
        title: "Accedi a SPID con Aruba",
        logo: "spid-idp-aruba.svg"
    },
    infocert: {
        url: "http://infocert",
        title: "Accedi a SPID con Infocert",
        logo: "spid-idp-infocertid.svg"
    },
    poste: {
        url: "http://poste",
        title: "Accedi a SPID con Poste",
        logo: "spid-idp-posteid.svg"
    },
    sielte: {
        url: "http://sielte",
        title: "Accedi a SPID con Sielte",
        logo: "spid-idp-sielteid.svg"
    },
    tim: {
        url: "http://tim",
        title: "Accedi a SPID con Tim",
        logo: "spid-idp-timid.svg"
    },
    newidp1: {
        url: "1",
        title: "Fornitore non attivo",
        logo: "spid-idp-dummy.svg"
    },
    newidp2: {
        url: "2",
        title: "Fornitore non attivo",
        logo: "spid-idp-dummy.svg"
    },
    newidp3: {
        url: "3",
        title: "Fornitore non attivo",
        logo: "spid-idp-dummy.svg"
    }
};

agid_spid_enter();