window.AgidSpidEnter=function(){function e(e,i){return w.tpl[e].call(w,i)}function i(e){e.removeAttribute("hidden")}function t(e){var i=document.createAttribute("hidden");e.setAttributeNode(i)}function n(){t(y),P.innerHTML="",E.focus()}function a(e){P.innerHTML=e,i(y),y.focus(),document.querySelector("#closemodalbutton").addEventListener("click",n)}function s(){for(var e=q.children.length;e>=0;e--)q.appendChild(q.children[Math.random()*e|0])}function o(e){var i=27===e.keyCode,t=!y.hasAttribute("hidden");i&&(t?n():d())}function r(){function e(){E.focus(),E.removeEventListener("animationend",e)}s(),i(S),document.addEventListener("keyup",o),E.addEventListener("animationend",e)}function d(){t(S),document.removeEventListener("keyup",o)}function l(i){var t,n,s=document.querySelector("#agid-spid-enter"),o="";for(t in i.spidProviders){if(!(n=i.spidProviders[t]).url)return;o+=e("spidProviderButton",n)}s.innerHTML=e("spidProviderChoiceModal",o),A=!0,document.querySelector("#agid-spid-panel-close-button").addEventListener("click",d),document.querySelector("#agid-spid-cancel-access-button").addEventListener("click",d),document.querySelector("#nospid").addEventListener("click",function(){a(e("nonHaiSpid"))}),document.querySelector("#cosaspid").addEventListener("click",function(){a(e("cosaSpid"))})}function c(){var i=document.querySelectorAll(".agid-spid-enter-button"),t=Array.from(i),n=t.length;A?n?(t.forEach(function(i){var t=i.getAttribute("data-size"),n=t.toLowerCase(),a=["s","m","l","xl"];-1!==a.indexOf(n)?i.innerHTML=e("spidButton",n):console.error("Le dimenioni supportate sono",a,"trovato invece:",t,i)}),Array.from(document.querySelectorAll(".agid-spid-enter")).forEach(function(e){e.addEventListener("click",r)})):console.warn("Nessun placeholder HTML trovato nella pagina per i pulsanti SPID"):console.error("Si è verificato un errore nel caricamento dei providers, impossibile renderizzare i pulsanti SPID")}function u(e,i,t){return new Promise(function(n,a){var s=new XMLHttpRequest;s.open(e,i),s.onreadystatechange=function(){4===s.readyState&&(200===s.status&&s.responseText?n(JSON.parse(s.responseText)):a(s.responseText))}.bind(this),s.send(JSON.stringify(t))})}function p(){var e={language:w.language};return u("POST",w.config.localisationEndpoint,e)}function g(){return u("POST",w.config.providersEndpoint)}function m(e){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=e,document.head.appendChild(i)}function h(i){(S=document.createElement("section")).id=i,t(S),document.body.insertBefore(S,document.body.firstChild),S.innerHTML=e("spidMainContainers")}function v(){q=document.querySelector("#agid-spid-idp-list"),y=document.querySelector("#agid-infomodal"),P=document.querySelector("#agid-infomodal-content"),E=document.querySelector("#agid-spid-panel-select")}function f(){document.getElementById("agid-spid-enter-container")||(m(w.config.stylesheetUrl),h("agid-spid-enter-container"))}function b(e){e.language&&(w.language=e.language)}var S,q,y,P,E,w=this,A=!1;return{init:function(e){var i;return e&&b(e),i=[p(),g()],Promise.all(i).then(function(e){w.i18n=e[0],f(),l(e[1]),c(),v(),Array.from(document.querySelectorAll(".agid-navigable")).forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})})}).catch(function(e){console.error("Si è verificato un errore nel caricamento dei dati",e)})},updateSpidButtons:c}},window.AgidSpidEnter.prototype.tpl={spidMainContainers:function(){return['<div id="agid-spid-enter"></div>','<div id="agid-infomodal" class="modal" aria-live="assertive" hidden>','<div class="modal-content agid-font">','<a id="closemodalbutton"','class="close agid-navigable"','role="button"','tabindex="0"','aria-label="',this.getI18n("aria_chiudi_modale"),'" href="#">','<b aria-hidden="true">&times;</b>',"</a>",'<div id="agid-infomodal-content" role="main" tabindex="0" aria-labelledby="agid-infomodal-title">',"</div>","</div>","</div>"].join("")},svgWithPngFallback:function(e,i){return['<img aria-hidden="true"','src="',this.config.assetsBaseUrl,e,'.svg"',"onerror=\"this.src='",this.config.assetsBaseUrl,e,".png'; this.onerror=null;\"",'alt="',i,'" />'].join("")},spidProviderChoiceModal:function(e){return['<div id="agid-spid-enter-anim"></div>','<section id="agid-spid-panel-select" aria-modal="true" aria-labelledby="agid-spid-enter-title-page" tabindex="-1">','<header id="agid-spid-panel-header">','<nav class="agid-spid-panel-back agid-spid-panel-element" aria-controls="agid-spid-panel-select">','<a role="button" tabindex="0" id="agid-spid-panel-close-button" href="#" class="agid-spid-button agid-navigable" aria-labelledby="agid-cancel-access-button">',this.tpl.svgWithPngFallback.call(this,"img/x-icon",this.getI18n("naviga_indietro")),"</a>","</nav>",'<div class="agid-spid-panel-logo agid-spid-panel-element">',this.tpl.svgWithPngFallback.call(this,"img/spid-logo-c-lb",this.getI18n("alt_logo_SPID")),"</div>","</header>",'<div id="agid-spid-panel-content">','<div class="agid-spid-panel-content-center">','<div id ="agid-spid-enter-title-container">','<h1 id="agid-spid-enter-title-page" class="agid-font">',this.getI18n("scegli_provider_SPID"),"</h1>","</div>",'<div id="agid-spid-idp-list" class="agid-spid-row">','<form method="POST">',e,"</form>","</div>",'<div id="agid-cancel-access-container">','<a id="agid-spid-cancel-access-button" class="agid-navigable" href="#" role="button">','<div id="agid-cancel-access-button" class="agid-transparent-button agid-font">',"<span>",this.getI18n("annulla_accesso"),"</span>","</div>","</a>","</div>",'<div id="agid-logo-container" aria-hidden="true">',this.tpl.svgWithPngFallback.call(this,"img/agid-logo-bb-short"),"</div>","</div>","</div>",'<footer id="agid-spid-panel-footer">','<div id="agid-action-button-container">','<a id="nospid" class="agid-navigable" href="#" role="button">','<div class="agid-action-button agid-font">',"<span>",this.getI18n("non_hai_SPID"),"</span>","</div>","</a>",'<a id="cosaspid" class="agid-navigable" href="#" role="button">','<div class="agid-action-button agid-font">',"<span>",this.getI18n("cosa_SPID"),"</span>","</div>","</a>","</div>","</footer>","</section>"].join("")},spidProviderButton:function(e){return['<span class="agid-spid-col l3 m6 s6 xs12">','<button type="submit" formaction="',e.url,'"','class="agid-spid-idp-button"','title="',e.title,'"','style="background-image: url(',this.config.assetsBaseUrl,"img/idp-logos/",e.logo,')">',"</button>","</span>"].join("")},spidButton:function(e){return["\x3c!-- AGID - SPID BUTTON ",e.toUpperCase()," * begin * --\x3e",'<button class="agid-spid-enter agid-font agid-spid-enter-size-',e,'" hidden>','<span aria-hidden="true" class="agid-spid-enter-icon">',this.tpl.svgWithPngFallback.call(this,"img/spid-ico-circle-bb",this.getI18n("entra_con_SPID")),"</span>",'<span class="agid-spid-enter-text">',this.getI18n("entra_con_SPID"),"</span>","</button>","\x3c!-- AGID - SPID BUTTON ",e.toUpperCase()," * end * --\x3e"].join("")},nonHaiSpid:function(){return['<h1 id="agid-infomodal-title">Non hai Spid?</h1>',"<ul>","<li>Morbi in sem quis dui placerat ornare. Pellentesque odio nisi, euismod in, pharetra a, ultricies in, diam. Sed arcu. Cras consequat.</li>","<li>Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus.</li>","<li>Phasellus ultrices nulla quis nibh. Quisque a lectus. Donec consectetuer ligula vulputate sem tristique cursus. Nam nulla quam, gravida non, commodo a, sodales sit amet, nisi.</li>","<li>Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.</li>","</ul>"].join("")},cosaSpid:function(){return['<h1 id="agid-infomodal-title">Cosa è SPID</h1>','<p><strong>Pellentesque habitant morbi tristique</strong> senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. <em>Aenean ultricies mi vitae est.</em> Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, <code>commodo vitae</code>, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. <a href="#">Donec non enim</a> in turpis pulvinar facilisis. Ut felis.</p>',"<h2>Header Level 2</h2>","<ol>","<li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>","<li>Aliquam tincidunt mauris eu risus.</li>","</ol>","<blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p></blockquote>","<h3>Header Level 3</h3>","<ul>","<li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>","<li>Aliquam tincidunt mauris eu risus.</li>","</ul>"].join("")}},window.AgidSpidEnter.prototype.language="it",window.AgidSpidEnter.prototype.i18n={},window.AgidSpidEnter.prototype.getI18n=function(e){var i=this.language,t=this.i18n.language&&this.i18n.language[i]&&this.i18n.language[i][e];return this.i18n.language[i]?this.i18n.language[i][e]||console.error("La chiave richiesta non è disponibile nel locale selezionato:",e):console.error("Il locale richiesto non è disponibile:",i),t||e},window.AgidSpidEnter.prototype.config={assetsBaseUrl:"https://rawgit.com/srescio/spid-smart-button/issue-2/separate-html-js/",stylesheetUrl:"https://rawgit.com/srescio/spid-smart-button/issue-2/separate-html-js/prod/agid-spid-enter.min.css",providersEndpoint:"https://rawgit.com/srescio/spid-smart-button/issue-2/separate-html-js/src/data/spidProviders.json",localisationEndpoint:"https://rawgit.com/srescio/spid-smart-button/issue-2/separate-html-js/src/data/spidI18n.json"},window.agidSpidEnter=new window.AgidSpidEnter;