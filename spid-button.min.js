function languages(){return{lang:{it:{naviga_indietro:"Torna indietro",alt_logo_SPID:"Logo SPID",scegli_provider_SPID:"Scegli il tuo provider SPID",annulla_accesso:"Annulla",non_hai_SPID:"Non hai SPID?",cosa_SPID:"Cos'è SPID?",entra_con_SPID:"Entra con SPID",scopri_di_piu:"Scopri di più.",accedi_con_idp:"Accedi a SPID con {0}",idp_disabled:"Provider non attivo"},en:{naviga_indietro:"Go back",alt_logo_SPID:"SPID logo",scegli_provider_SPID:"Choose your SPID provider",annulla_accesso:"Cancel",non_hai_SPID:"Don't have SPID?",cosa_SPID:"What is SPID?",entra_con_SPID:"Sign in with SPID",scopri_di_piu:"Learn more.",accedi_con_idp:"Access to SPID with {0}",idp_disabled:"Provider not enabled"},de:{naviga_indietro:"Gehen Sie zurück",alt_logo_SPID:"SPID Logo",scegli_provider_SPID:"Wähle Ihren SPIDProvider",annulla_accesso:"Zurücknehmen",non_hai_SPID:"Haben Sie nicht SPID?",cosa_SPID:"Was ist SPID?",entra_con_SPID:"Loggen Sie mit SPID",scopri_di_piu:"Finde mehr heraus.",accedi_con_idp:"Zugriff auf SPID mit {0}",idp_disabled:"Provider nicht aktiviert"}}}}function providers(){return spidProviders=[{protocols:["SAML"],entityName:"Aruba ID",logo:"spid-idp-arubaid.svg",entityID:"https://loginspid.aruba.it",active:!0},{protocols:["SAML"],entityName:"Infocert ",logo:"spid-idp-infocertid.svg",entityID:"https://identity.infocert.it",active:!0},{protocols:["SAML"],entityName:"Poste ID",logo:"spid-idp-posteid.svg",entityID:"https://posteid.poste.it",active:!0},{protocols:["SAML"],entityName:"Sielte",logo:"spid-idp-sielteid.svg",entityID:"sielte.it",active:!0},{protocols:["SAML"],entityName:"Tim ID",logo:"spid-idp-timid.svg",entityID:"https://login.id.tim.it/affwebservices/public/saml2sso",active:!0},{protocols:["SAML"],entityName:"Namirial ID",logo:"spid-idp-namirialid.svg",entityID:"https://idp.namirialtsp.com/idp",active:!0},{protocols:["SAML"],entityName:"SPIDItalia Register.it",logo:"spid-idp-spiditalia.svg",entityID:"https://spid.register.it",active:!0},{protocols:["SAML"],entityName:"Intesa ID",logo:"spid-idp-intesaid.svg",entityID:"https://spid.intesa.it",active:!0}]}var _SPID;!function(e){e.prototype.initResources=function(){this.resources={assetsBaseUrl:"https://italia.github.io/spid-smart-button/",stylesheetUrl:"https://italia.github.io/spid-smart-button/spid-button.min.css"}}}((_SPID=function(e,i){function t(){this.resources={},this.templates={},this._lang="it",this._i18n=e(),this._availableProviders=i(),this._selector="#spid-button",this._protocol="SAML",this._style={size:"medium",colorScheme:"positive",fluid:!1,cornerStyle:"rounded"}}function n(e,i){return['<img aria-hidden="true"','src="',this.getResources().assetsBaseUrl,e,'.svg"','alt="',i,'" style="float:left"/>'].join("")}function s(e,i){return['<input type="hidden" name="',e,'" value="',i,'" />'].join("")}return t.prototype.initTemplates=function(){this.templates={spidMainContainers:function(){return['<div id="spid-enter">',"</div>"].join("")},spidProviderChoiceModal:function(e){return['<section id="agid-spid-panel-select" class="agid-spid-panel" aria-labelledby="spid-enter-title-page" tabindex="0">','<header class="agid-spid-header">','<div class="agid-spid-panel-back agid-spid-panel-element">','<div id="agid-logo" class="agid-display-logo agid-fade-out-left">',n.call(this,"img/spid-logo",this.getI18n("alt_logo_SPID")),"</div>",'<div id="agid-close-button" class="agid-display-close agid-fade-out-right">','<button tabindex="0" id="agid-spid-panel-close-button" class="agid-navigable" aria-labelledby="spid-cancel-access-button">',n.call(this,"img/close",this.getI18n("naviga_indietro")),"</button>","</div>","</div>","</header>",'<div id="agid-spid-panel-content">','<img class="agid-spid-little-man-icon" src="',this.getResources().assetsBaseUrl,"img/spid-logo-animation-black.svg",'" alt="',this.getI18n("entra_con_SPID"),'" class="agid-spid-littleMan-icon"></img>','<div class="agid-spid-panel-content-center">','<h1 id="spid-enter-title-page" class="agid-fade-in-bottom agid-fade-out-bottom">',this.getI18n("scegli_provider_SPID"),"</h1>",'<div id="spid-idp-list">',e,"</div>",'<div id="spid-non-hai-spid">','<span class="agid-non-hai-spid-font">',this.getI18n("non_hai_SPID"),"</span>",'<span id="spid-nonhai-spid" class="agid-spid-link agid-non-hai-spid-font">',this.getI18n("scopri_di_piu"),"</span>","</div>","</div>","</div>",'<div id="spid-foot-btn" class="agid-spid-circular-shadow">','<button id="spid-cancel-access-button" class="agid-font">',"<span>",this.getI18n("annulla_accesso"),"</span>","</button>","</div>","</section>"].join("")},spidProviderButton:function(e){var i="",t="",n=e.active?this.getI18n("accedi_con_idp",e.entityName):this.getI18n("idp_disabled");if(t=e.url.replace("{{idp}}",encodeURIComponent(e.entityID)),"POST"===e.method){if(i+=s(e.fieldName||"idp",e.entityID),e.extraFields)for(property in e.extraFields)i+=s(property,e.extraFields[property]);return['<span class="agid-spid-idp">','<form action="',t,'" method="',e.method,'">','<button type="submit"','class="agid-spid-idp-button"','title="',n,'"',e.supported?"":"disabled",">",'<img src="',this.getResources().assetsBaseUrl,"img/idp-logos/",e.logo,'" alt="',e.entityName,'">',"</button>",i,"</form>","</span>"].join("")}if("GET"===e.method)return['<span class="agid-spid-idp">','<a title="',n,'" href="',t,'"',e.supported?"":"disabled",">",'<img src="',this.getResources().assetsBaseUrl,"img/idp-logos/",e.logo,'" alt="',e.entityName,'">',"</a>","</span>"].join("")},spidButton:function(e){var i=e.fluid?" agid-spid-enter-fluid ":"",t="negative"==e.colorScheme?"img/spid-ico-circle-lb.svg":"img/spid-ico-circle-bb.svg";return["\x3c!-- AGID - SPID BUTTON ",e.size.toUpperCase()," * begin * --\x3e",'<div id="spid-enter-button-container">','<button class="agid-spid-enter agid-font agid-spid-enter-button-',e.colorScheme," agid-spid-enter-button-",e.cornerStyle," agid-spid-enter-size-",e.size,i,'" hidden>','<span aria-hidden="true" class="agid-spid-enter-icon">','<img src="',this.getResources().assetsBaseUrl,t,'" alt="',this.getI18n("entra_con_SPID"),'"></img>',"</span>",'<span class="agid-spid-enter-text">',this.getI18n("entra_con_SPID"),"</span>","</button>","</div>","\x3c!-- AGID - SPID BUTTON ",e.size.toUpperCase()," * end * --\x3e"].join("")}}},t}(languages,providers))||{});var _SPID,SPID=function(e){"use strict";function i(e){e.removeAttribute("hidden")}function t(e){var i=document.createAttribute("hidden");e.setAttributeNode(i)}function n(e){var i=setInterval(function(){e.focus()},100);g.addEventListener("focus",function(){clearInterval(i)})}function s(){var e=document.getElementsByClassName("choosedButton")[0];document.getElementsByClassName("agid-spid-enter-icon")[0].classList.remove("in"),document.getElementsByClassName("agid-spid-little-man-icon")[0].classList.add("agid-spid-enter-logo-animation-out"),document.getElementById("agid-spid-panel-select").classList.add("agid-spid-panel-anim"),e.classList.remove("agid-enter-transition"),e.classList.remove("choosedButton"),e.classList.add("agid-reverse-enter-transition"),setTimeout(function(){e.classList.remove("agid-reverse-enter-transition"),document.getElementsByClassName("agid-spid-little-man-icon")[0].classList.remove("agid-spid-enter-logo-animation-out")},2e3)}function o(e){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=e,document.head.appendChild(i)}function a(){u=document.querySelector("#spid-idp-list"),g=document.querySelector("#agid-spid-panel-select")}function r(e,i){var t;return e.map(function(e){e.url=i.url,e.method=i.method||"GET","POST"===e.method&&(e.fieldName=i.fieldName,e.extraFields=i.extraFields);for(t in i.mapping)e.entityID===t&&(e.entityID=i.mapping[t]);return e.supported?-1===e.protocols.indexOf(i.protocol)&&(e.supported=!1):-1===i.supported.indexOf(e.entityID)||-1===e.protocols.indexOf(i.protocol)?e.supported=!1:e.supported=!0,e})}function d(e,i){var t;if(i.extraProviders){for(t=0;t<i.extraProviders.length;t++)i.extraProviders[t].supported=!0;e=e.concat(i.extraProviders)}return e}function l(e){var i=["small","medium","large"],t=["positive","negative"],n=["rounded","sharp"],s=[!0,!1];return-1===i.indexOf(e.size.toLowerCase())?"Le dimensioni supportate sono "+i+" trovato invece:"+e.size:-1===t.indexOf(e.colorScheme.toLowerCase())?"I colori supportati sono "+t+" trovati invece:"+e.colorScheme:-1===n.indexOf(e.cornerStyle.toLowerCase())?"Il tipo di angoli supportati sono "+n+" trovati invece:"+e.cornerStyle:-1!==s.indexOf(e.fluid)||"I valori del parametro supportati sono "+s+" trovati invece:"+e.fluid}function c(e){return e?e.url?-1===e.url.indexOf("{{idp}}")?"L'url non contiene il placeholder {{idp}}":!(!e.supported||e.supported.length<1)||"Non sono stati forniti gli IdP supportati nel parametro 'supported'":"Non è stato fornito l'url obbligatorio in configurazione":"Non sono stati forniti i parametri obbligatori della configurazione"}var p,u,g,m=function(i){this.internalSPID=new e,this.internalSPID._init(i),this.changeLanguage=function(e){return this.internalSPID.changeLanguage(e)}};return e.prototype.getTemplate=function(e,i){return this.templates[e].call(this,i)},e.prototype.handleEscKeyEvent=function(e){27===e.keyCode&&this.hideProvidersPanel()},e.prototype.showProvidersPanel=function(){var e=this;i(p),n(g),document.addEventListener("keyup",function(i){e.handleEscKeyEvent(i)})},e.prototype.hideProvidersPanel=function(){var e=this;t(p),document.addEventListener("keyup",function(i){e.handleEscKeyEvent(i)})},e.prototype.renderAvailableProviders=function(){var e=this,i=document.querySelector("#spid-enter"),t="";e._availableProviders.forEach(function(i){t+=e.getTemplate("spidProviderButton",i)}),i.innerHTML=e.getTemplate("spidProviderChoiceModal",t),document.querySelector("#agid-spid-panel-close-button").addEventListener("click",function(){e.hideProvidersPanel(),s()}),document.querySelector("#spid-cancel-access-button").addEventListener("click",function(){e.hideProvidersPanel(),s()})},e.prototype.addContainersWrapper=function(e){(p=document.createElement("section")).id=e,t(p),document.body.insertBefore(p,document.body.firstChild),p.innerHTML=this.getTemplate("spidMainContainers",null)},e.prototype.renderSpidModalContainers=function(){document.getElementById("spid-enter-container")||(o(this.resources.stylesheetUrl),this.addContainersWrapper("spid-enter-container"))},e.prototype.renderModule=function(){this.renderSpidModalContainers(),this.renderAvailableProviders(),this.updateSpidButtons(),a()},e.prototype.getMergedDefaultOptions=function(e){return e=e||{},e.lang=this._lang=e.lang||this._lang,e.selector=this._selector=e.selector||this._selector,e.protocol=e.protocol||this._protocol,e.size=this._style.size=e.size||this._style.size,e.colorScheme=this._style.colorScheme=e.colorScheme||this._style.colorScheme,e.fluid=this._style.fluid=e.fluid||this._style.fluid,e.cornerStyle=this._style.cornerStyle=e.cornerStyle||this._style.cornerStyle,e},e.prototype._init=function(e){var i,t,n=this;!0===(t=c(e))?(n.initResources(),e=n.getMergedDefaultOptions(e),!0===(i=l(n._style))?(n.initTemplates(),n._availableProviders=d(n._availableProviders,e),n._availableProviders=r(n._availableProviders,e),n.renderModule()):console.error(i)):console.error(t)},e.prototype.changeLanguage=function(e){var i=this;i._lang=e,i.renderModule()},e.prototype.updateSpidButtons=function(){var e,i,t,n=document.querySelectorAll(this._selector),s=n.length,o=0,a=0,r=0,d=this;if(this._availableProviders)if(s)for(o;o<s;o++)n[o].innerHTML=this.getTemplate("spidButton",this._style),e=document.querySelectorAll(".agid-spid-enter"),Array.prototype.forEach.call(e,function(e){e.addEventListener("click",function(){var n=e.parentElement;for(n.classList.add("agid-enter-transition"),n.classList.add("choosedButton"),d.showProvidersPanel(),document.getElementById("agid-logo").classList.add("agid-fade-in-left"),document.getElementById("agid-close-button").classList.add("agid-fade-in-left"),document.getElementById("agid-spid-panel-select").classList.add("agid-spid-panel-anim"),document.getElementsByClassName("agid-spid-enter-icon")[0].classList.add("agid-spid-enter-icon-animation"),document.getElementsByClassName("agid-spid-enter-icon")[0].classList.add("in"),i=document.getElementsByClassName("agid-spid-idp"),t=1.1,a=0;a<i.length;a++)i[a].classList.add("agid-spid-idp-fade-in"),i[a].setAttribute("style","animation-delay: "+t+"s"),t+=.1;setTimeout(function(){for(n.classList.remove("agid-enter-transition"),document.getElementById("agid-logo").classList.remove("agid-fade-in-left"),document.getElementById("agid-close-button").classList.remove("agid-fade-in-left"),document.getElementById("agid-spid-panel-select").classList.remove("agid-spid-panel-anim"),r=0;r<i.length;r++)i[r].classList.remove("agid-spid-idp-fade-in"),i[r].removeAttribute("style")},2e3)})});else console.warn("Nessun placeholder HTML trovato nella pagina per i pulsanti SPID");else console.error("Si è verificato un errore nel caricamento dei providers, impossibile renderizzare i pulsanti SPID")},e.prototype.setResources=function(e){this.resources=e},e.prototype.getResources=function(){return JSON.parse(JSON.stringify(this.resources))},e.prototype.getI18n=function(e,i){var t=this._lang,n=this._i18n.lang&&this._i18n.lang[t]&&this._i18n.lang[t][e],s=/\{\d}/;return i&&(n=n.replace(s,i)),n||console.error("La chiave richiesta non è disponibile nella lingua selezionata:",t,e),n||e},new function(){var e;this.init=function(i,t,n){return e=new m(i,t,n)}}}(_SPID||{});