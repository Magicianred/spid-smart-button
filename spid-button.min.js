function languages(){return{lang:{it:{naviga_indietro:"Torna indietro",alt_logo_SPID:"Logo SPID",scegli_provider_SPID:"Scegli il tuo provider SPID",annulla_accesso:"Annulla",non_hai_SPID:"Non hai SPID?",cosa_SPID:"Cos'è SPID?",entra_con_SPID:"Entra con SPID",scopri_di_piu:"Scopri di più.",accedi_con_idp:"Accedi a SPID con {0}",idp_disabled:"Provider non attivo"},en:{naviga_indietro:"Go back",alt_logo_SPID:"SPID logo",scegli_provider_SPID:"Choose your SPID provider",annulla_accesso:"Cancel",non_hai_SPID:"Don't have SPID?",cosa_SPID:"What is SPID?",entra_con_SPID:"Sign in with SPID",scopri_di_piu:"Learn more.",accedi_con_idp:"Access to SPID with {0}",idp_disabled:"Provider not enabled"},de:{naviga_indietro:"Gehen Sie zurück",alt_logo_SPID:"SPID Logo",scegli_provider_SPID:"Wähle Ihren SPIDProvider",annulla_accesso:"Zurücknehmen",non_hai_SPID:"Haben Sie nicht SPID?",cosa_SPID:"Was ist SPID?",entra_con_SPID:"Loggen Sie mit SPID",scopri_di_piu:"Finde mehr heraus.",accedi_con_idp:"Zugriff auf SPID mit {0}",idp_disabled:"Provider nicht aktiviert"}}}}function providers(){return spidProviders=[{protocols:["SAML"],entityName:"Aruba ID",logo:"spid-idp-arubaid.svg",entityID:"https://loginspid.aruba.it",active:!0},{protocols:["SAML"],entityName:"Infocert ",logo:"spid-idp-infocertid.svg",entityID:"https://identity.infocert.it",active:!0},{protocols:["SAML"],entityName:"Poste ID",logo:"spid-idp-posteid.svg",entityID:"https://posteid.poste.it",active:!0},{protocols:["SAML"],entityName:"Sielte",logo:"spid-idp-sielteid.svg",entityID:"https://identity.sieltecloud.it",active:!0},{protocols:["SAML"],entityName:"Tim ID",logo:"spid-idp-timid.svg",entityID:"https://login.id.tim.it/affwebservices/public/saml2sso",active:!0},{protocols:["SAML"],entityName:"Namirial ID",logo:"spid-idp-namirialid.svg",entityID:"https://idp.namirialtsp.com/idp",active:!0},{protocols:["SAML"],entityName:"SPIDItalia Register.it",logo:"spid-idp-spiditalia.svg",entityID:"https://spid.register.it",active:!0},{protocols:["SAML"],entityName:"Intesa ID",logo:"spid-idp-intesaid.svg",entityID:"https://spid.intesa.it",active:!0},{protocols:["SAML"],entityName:"Lepida ID",logo:"spid-idp-lepidaid.svg",entityID:"https://id.lepida.it/idp/shibboleth",active:!0}]}var _SPID;!function(t){t.prototype.initResources=function(){this.resources={assetsBaseUrl:"https://italia.github.io/spid-smart-button/",stylesheetUrl:"https://italia.github.io/spid-smart-button/spid-button.min.css"}}}((_SPID=function(t,e){function i(){this.resources={},this.templates={},this._lang="it",this._i18n=t(),this._availableProviders=e(),this._selector="#spid-button",this._protocol="SAML",this._style={size:"medium",colorScheme:"positive",fluid:!1,cornerStyle:"rounded"}}function n(t,e){return['<img aria-hidden="true"','src="',this.getResources().assetsBaseUrl,t,'.svg"','alt="',e,'" style="float:left"/>'].join("")}function o(t,e){return['<input type="hidden" name="',t,'" value="',e,'" />'].join("")}return i.prototype.initTemplates=function(){this.templates={spidMainContainers:function(){return['<div id="spid-enter">',"</div>"].join("")},spidProviderChoiceModal:function(t){return['<section id="spid-button-panel-select" class="spid-button-panel" aria-labelledby="spid-enter-title-page" tabindex="0">','<header class="spid-button-header">','<div class="spid-button-panel-back spid-button-panel-element">','<div id="spid-button-logo" class="spid-button-display-logo spid-button-fade-out-left">',n.call(this,"img/spid-logo",this.getI18n("alt_logo_SPID")),"</div>",'<div id="spid-button-close-button" class="spid-button-display-close spid-button-fade-out-right">','<button tabindex="0" id="spid-button-panel-close-button" class="spid-button-navigable" aria-labelledby="spid-cancel-access-button">',n.call(this,"img/close",this.getI18n("naviga_indietro")),"</button>","</div>","</div>","</header>",'<div id="spid-button-panel-content">','<img class="spid-button-little-man-icon" src="',this.getResources().assetsBaseUrl,"img/spid-logo-animation-black.svg",'" alt="',this.getI18n("entra_con_SPID"),'" class="spid-button-littleMan-icon"></img>','<div class="spid-button-panel-content-center">','<h1 id="spid-enter-title-page" class="spid-button-fade-in-bottom spid-button-fade-out-bottom">',this.getI18n("scegli_provider_SPID"),"</h1>",'<div id="spid-idp-list">',t,"</div>",'<div id="spid-non-hai-spid">','<span class="spid-button-non-hai-spid-font">',this.getI18n("non_hai_SPID"),"</span>",'<span id="spid-nonhai-spid" class="spid-button-link spid-button-non-hai-spid-font">',this.getI18n("scopri_di_piu"),"</span>","</div>","</div>","</div>",'<div id="spid-foot-btn" class="spid-button-circular-shadow">','<button id="spid-cancel-access-button" class="spid-button-font">',"<span>",this.getI18n("annulla_accesso"),"</span>","</button>","</div>","</section>"].join("")},spidProviderButton:function(t){var e="",i="",n=t.active?this.getI18n("accedi_con_idp",t.entityName):this.getI18n("idp_disabled");if(i=t.url.replace("{{idp}}",encodeURIComponent(t.entityID)),"POST"===t.method){if(e+=o(t.fieldName||"idp",t.entityID),t.extraFields)for(property in t.extraFields)e+=o(property,t.extraFields[property]);return['<span class="spid-button-idp">','<form action="',i,'" method="',t.method,'">','<button type="submit"','class="spid-button-idp-button"','title="',n,'"',t.supported?"":"disabled",">",'<img src="',this.getResources().assetsBaseUrl,"img/idp-logos/",t.logo,'" alt="',t.entityName,'">',"</button>",e,"</form>","</span>"].join("")}if("GET"===t.method)return['<span class="spid-button-idp">','<a title="',n,'" href="',i,'"',t.supported?"":"disabled",">",'<img src="',this.getResources().assetsBaseUrl,"img/idp-logos/",t.logo,'" alt="',t.entityName,'">',"</a>","</span>"].join("")},spidButton:function(t){var e=t.fluid?" spid-button-fluid ":"",i="negative"==t.colorScheme?"img/spid-ico-circle-lb.svg":"img/spid-ico-circle-bb.svg";return["\x3c!-- AGID - SPID BUTTON ",t.size.toUpperCase()," * begin * --\x3e",'<div id="spid-enter-button-container">','<button class="spid-button spid-button-font spid-button-',t.colorScheme," spid-button-",t.cornerStyle," spid-button-size-",t.size,e,'" hidden>','<span aria-hidden="true" class="spid-button-icon">','<img src="',this.getResources().assetsBaseUrl,i,'" alt="',this.getI18n("entra_con_SPID"),'"></img>',"</span>",'<span class="spid-button-text">',this.getI18n("entra_con_SPID"),"</span>","</button>","</div>","\x3c!-- AGID - SPID BUTTON ",t.size.toUpperCase()," * end * --\x3e"].join("")}}},i}(languages,providers))||{});var _SPID,SPID=function(t){"use strict";function e(t){t.removeAttribute("hidden")}function i(t){var e=document.createAttribute("hidden");t.setAttributeNode(e)}function n(t){var e=setInterval(function(){t.focus()},100);h.addEventListener("focus",function(){clearInterval(e)})}function o(){var t=document.getElementsByClassName("choosedButton")[0];document.getElementsByClassName("spid-button-icon")[0].classList.remove("in"),document.getElementsByClassName("spid-button-little-man-icon")[0].classList.add("spid-button-logo-animation-out"),document.getElementById("spid-button-panel-select").classList.add("spid-button-panel-anim"),t.classList.remove("spid-button-transition"),t.classList.remove("choosedButton"),t.classList.add("spid-button-reverse-enter-transition"),setTimeout(function(){t.classList.remove("spid-button-reverse-enter-transition"),document.getElementsByClassName("spid-button-little-man-icon")[0].classList.remove("spid-button-logo-animation-out")},2e3)}function s(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.head.appendChild(e)}function a(){u=document.querySelector("#spid-idp-list"),h=document.querySelector("#spid-button-panel-select")}function r(t,e){var i;return t.map(function(t){t.url=e.url,t.method=e.method||"GET","POST"===t.method&&(t.fieldName=e.fieldName,t.extraFields=e.extraFields);for(i in e.mapping)t.entityID===i&&(t.entityID=e.mapping[i]);return t.supported?-1===t.protocols.indexOf(e.protocol)&&(t.supported=!1):-1===e.supported.indexOf(t.entityID)||-1===t.protocols.indexOf(e.protocol)?t.supported=!1:t.supported=!0,t})}function d(t,e){var i;if(e.extraProviders){for(i=0;i<e.extraProviders.length;i++)e.extraProviders[i].supported=!0;t=t.concat(e.extraProviders)}return t}function l(t){var e=["small","medium","large"],i=["positive","negative"],n=["rounded","sharp"],o=[!0,!1];return-1===e.indexOf(t.size.toLowerCase())?"Le dimensioni supportate sono "+e+" trovato invece:"+t.size:-1===i.indexOf(t.colorScheme.toLowerCase())?"I colori supportati sono "+i+" trovati invece:"+t.colorScheme:-1===n.indexOf(t.cornerStyle.toLowerCase())?"Il tipo di angoli supportati sono "+n+" trovati invece:"+t.cornerStyle:-1!==o.indexOf(t.fluid)||"I valori del parametro supportati sono "+o+" trovati invece:"+t.fluid}function c(t){return t?t.url?-1===t.url.indexOf("{{idp}}")?"L'url non contiene il placeholder {{idp}}":!(!t.supported||t.supported.length<1)||"Non sono stati forniti gli IdP supportati nel parametro 'supported'":"Non è stato fornito l'url obbligatorio in configurazione":"Non sono stati forniti i parametri obbligatori della configurazione"}var p,u,h,m=function(e){this.internalSPID=new t,this.internalSPID._init(e),this.changeLanguage=function(t){return this.internalSPID.changeLanguage(t)}};return t.prototype.getTemplate=function(t,e){return this.templates[t].call(this,e)},t.prototype.handleEscKeyEvent=function(t){27===t.keyCode&&this.hideProvidersPanel()},t.prototype.showProvidersPanel=function(){var t=this;e(p),n(h),document.addEventListener("keyup",function(e){t.handleEscKeyEvent(e)})},t.prototype.hideProvidersPanel=function(){var t=this;i(p),document.addEventListener("keyup",function(e){t.handleEscKeyEvent(e)})},t.prototype.renderAvailableProviders=function(){var t=this,e=document.querySelector("#spid-enter"),i="";t._availableProviders.forEach(function(e){i+=t.getTemplate("spidProviderButton",e)}),e.innerHTML=t.getTemplate("spidProviderChoiceModal",i),document.querySelector("#spid-button-panel-close-button").addEventListener("click",function(){t.hideProvidersPanel(),o()}),document.querySelector("#spid-cancel-access-button").addEventListener("click",function(){t.hideProvidersPanel(),o()})},t.prototype.addContainersWrapper=function(t){(p=document.createElement("section")).id=t,i(p),document.body.insertBefore(p,document.body.firstChild),p.innerHTML=this.getTemplate("spidMainContainers",null)},t.prototype.renderSpidModalContainers=function(){document.getElementById("spid-enter-container")||(s(this.resources.stylesheetUrl),this.addContainersWrapper("spid-enter-container"))},t.prototype.renderModule=function(){this.renderSpidModalContainers(),this.renderAvailableProviders(),this.updateSpidButtons(),a()},t.prototype.getMergedDefaultOptions=function(t){return t=t||{},t.lang=this._lang=t.lang||this._lang,t.selector=this._selector=t.selector||this._selector,t.protocol=t.protocol||this._protocol,t.size=this._style.size=t.size||this._style.size,t.colorScheme=this._style.colorScheme=t.colorScheme||this._style.colorScheme,t.fluid=this._style.fluid=t.fluid||this._style.fluid,t.cornerStyle=this._style.cornerStyle=t.cornerStyle||this._style.cornerStyle,t},t.prototype._init=function(t){var e,i,n=this;!0===(i=c(t))?(n.initResources(),t=n.getMergedDefaultOptions(t),!0===(e=l(n._style))?(n.initTemplates(),n._availableProviders=d(n._availableProviders,t),n._availableProviders=r(n._availableProviders,t),n.renderModule()):console.error(e)):console.error(i)},t.prototype.changeLanguage=function(t){var e=this;e._lang=t,e.renderModule()},t.prototype.updateSpidButtons=function(){var t,e,i,n=document.querySelectorAll(this._selector),o=n.length,s=0,a=0,r=0,d=this;if(this._availableProviders)if(o)for(s;s<o;s++)n[s].innerHTML=this.getTemplate("spidButton",this._style),t=document.querySelectorAll(".spid-button"),Array.prototype.forEach.call(t,function(t){t.addEventListener("click",function(){var n=t.parentElement;for(n.classList.add("spid-button-transition"),n.classList.add("choosedButton"),d.showProvidersPanel(),document.getElementById("spid-button-logo").classList.add("spid-button-fade-in-left"),document.getElementById("spid-button-close-button").classList.add("spid-button-fade-in-left"),document.getElementById("spid-button-panel-select").classList.add("spid-button-panel-anim"),document.getElementsByClassName("spid-button-icon")[0].classList.add("spid-button-icon-animation"),document.getElementsByClassName("spid-button-icon")[0].classList.add("in"),e=document.getElementsByClassName("spid-button-idp"),i=1.1,a=0;a<e.length;a++)e[a].classList.add("spid-button-idp-fade-in"),e[a].setAttribute("style","animation-delay: "+i+"s"),i+=.1;setTimeout(function(){for(n.classList.remove("spid-button-transition"),document.getElementById("spid-button-logo").classList.remove("spid-button-fade-in-left"),document.getElementById("spid-button-close-button").classList.remove("spid-button-fade-in-left"),document.getElementById("spid-button-panel-select").classList.remove("spid-button-panel-anim"),r=0;r<e.length;r++)e[r].classList.remove("spid-button-idp-fade-in"),e[r].removeAttribute("style")},2e3)})});else console.warn("Nessun placeholder HTML trovato nella pagina per i pulsanti SPID");else console.error("Si è verificato un errore nel caricamento dei providers, impossibile renderizzare i pulsanti SPID")},t.prototype.setResources=function(t){this.resources=t},t.prototype.getResources=function(){return JSON.parse(JSON.stringify(this.resources))},t.prototype.getI18n=function(t,e){var i=this._lang,n=this._i18n.lang&&this._i18n.lang[i]&&this._i18n.lang[i][t],o=/\{\d}/;return e&&(n=n.replace(o,e)),n||console.error("La chiave richiesta non è disponibile nella lingua selezionata:",i,t),n||t},new function(){var t;this.init=function(e,i,n){return t=new m(e,i,n)}}}(_SPID||{});