window.AgidSpidEnter=function(){function i(i,e){return S.tpl[i].call(S,e)}function e(){h.style.display="none",h.innerHTML="",y.focus()}function t(t){h.innerHTML=i("infoModal",t),h.style.display="block",h.focus(),document.querySelector("#closemodalbutton").addEventListener("click",e)}function n(){var i,e=document.querySelector("#agid-spid-idp-list");for(i=e.children.length;i>=0;i--)e.appendChild(e.children[Math.random()*i|0])}function a(i){var e=document.getElementById(i);e.style.display="block",e.classList.remove(i+"-anim-in"),e.classList.remove(i+"-anim-out"),e.classList.add(i+"-anim-in")}function s(i){var e=document.getElementById(i);e.classList.remove(i+"-anim-in"),e.classList.remove(i+"-anim-out"),e.classList.add(i+"-anim-out")}function o(){var i,e=y,t=document.querySelector("#agid-spid-button-anim-base"),s=document.querySelector("#agid-spid-button-anim"),o=document.querySelector(".agid-spid-enter-button");n(),e.removeAttribute("hidden"),e.style.display="block",Array.from(o).forEach(function(e){i=document.createAttribute("hidden"),e.style.display="none",e.setAttributeNode(i)}),a("agid-spid-button-anim"),a("agid-spid-button-anim-base"),a("agid-spid-button-anim-icon"),a("agid-spid-panel-select"),t.addEventListener("animationstart",function(){s.style.display="block",t.style.display="block"},!0),t.addEventListener("animationend",function(){s.style.display="block",t.style.display="block",e.focus()},!0)}function d(){var i=y,e=document.querySelector("#agid-spid-button-anim-base"),t=document.querySelector("#agid-spid-button-anim"),n=document.querySelector(".agid-spid-enter-button"),a=document.createAttribute("hidden");i.setAttributeNode(a),i.style.display="none",Array.from(n).forEach(function(i){i.style.display="block",i.removeAttribute("hidden")}),s("agid-spid-button-anim"),s("agid-spid-button-anim-base"),s("agid-spid-button-anim-icon"),s("agid-spid-panel-select"),e.addEventListener("animationstart",function(){t.style.display="block",e.style.display="block"},!0),e.addEventListener("animationend",function(){var i;t.style.display="none",e.style.display="none",i=e.cloneNode(!0),e.parentNode.replaceChild(i,e)},!0)}function r(e){var n,a,s=document.querySelector("#agid-spid-enter"),o="";for(n in e.spidProviders){if(!(a=e.spidProviders[n]).url)return;o+=i("spidProviderButton",a)}s.innerHTML=i("spidProviderChoiceModal",o),q=!0,document.querySelector("#agid-spid-panel-close-button").addEventListener("click",d),document.querySelector("#agid-spid-cancel-access-button").addEventListener("click",d),document.querySelector("#nospid").addEventListener("click",function(){t(i("nonHaiSpid"))}),document.querySelector("#cosaspid").addEventListener("click",function(){t(i("cosaSpid"))})}function l(){var i=document.querySelectorAll(".agid-spid-enter-button");return Array.from(i)}function u(){var e=l(),t=e.length;q?t?(e.forEach(function(e){var t=e.getAttribute("data-size"),n=t.toLowerCase(),a=["s","m","l","xl"];-1!==a.indexOf(n)?e.innerHTML=i("spidButton",n):console.error("Le dimenioni supportate sono",a,"trovato invece:",t,e)}),Array.from(document.querySelectorAll(".agid-spid-enter")).forEach(function(i){i.addEventListener("click",o)})):console.warn("Nessun placeholder HTML trovato nella pagina per i pulsanti SPID"):console.error("Si è verificato un errore nel caricamento dei providers, impossibile renderizzare i pulsanti SPID")}function c(i,e){return new Promise(function(t,n){var a=new XMLHttpRequest;a.open(i,e),a.onreadystatechange=function(){4===a.readyState&&(200===a.status&&a.responseText?t(JSON.parse(a.responseText)):n(a.responseText))}.bind(this),a.send()})}function p(){return c("GET",S.config.localisationEndpoint)}function m(){return c("GET",S.config.providersEndpoint)}function g(i){return"none"!==i.style.display}function v(){var e;document.getElementById("agid-spid-enter-container")||((e=document.createElement("SECTION")).id="agid-spid-enter-container",document.body.insertBefore(e,document.body.firstChild),e.innerHTML=i("spidMainContainers"))}function b(){document.addEventListener("keyup",function(i){var t=27===i.keyCode,n=g(h),a=g(y);t&&(n?e():a&&d())})}function f(){h=document.querySelector("#agid-infomodal"),y=document.querySelector("#agid-spid-panel-select")}var h,y,S=this,q=!1;return{init:function(){var i=[p(),m()];return Promise.all(i).then(function(i){S.i18n=i[0],v(),r(i[1]),u(),f(),b()}).catch(function(i){console.error("Si è verificato un errore nel caricamento dei dati",i)})},updateSpidButtons:u}},window.AgidSpidEnter.prototype.tpl={spidMainContainers:function(){return['<link rel="stylesheet" href="css/agid-spid-enter.min.css">','<div id="agid-spid-enter"></div>','<div id="agid-infomodal" class="modal" aria-live="assertive" hidden></div>'].join("")},spidProviderChoiceModal:function(i){return['<div id="agid-spid-button-anim">','<div id="agid-spid-button-anim-base"></div>','<div id="agid-spid-button-anim-icon"></div>',"</div>",'<section id="agid-spid-panel-select" class="agid-spid-panel" aria-modal="true" aria-labelledby="agid-spid-enter-title-page" tabindex="-1" hidden>','<header id="agid-spid-panel-header">','<nav class="agid-spid-panel-back agid-spid-panel-element" aria-controls="agid-spid-panel-select">','<div role="button" tabindex="0">','<a id="agid-spid-panel-close-button" href="#" class="agid-spid-button">','<img src="img/x-icon.svg" alt="',this.getI18n("naviga_indietro"),'">',"</a>","</div>","</nav>",'<div class="agid-spid-panel-logo agid-spid-panel-element">','<img aria-hidden="true" src="img/spid-logo-c-lb.svg" alt="',this.getI18n("alt_logo_SPID"),'">',"</div>","</header>",'<div id="agid-spid-panel-content">','<div class="agid-spid-panel-content-center">','<div id ="agid-spid-enter-title-container">','<h1 id="agid-spid-enter-title-page">',this.getI18n("scegli_provider_SPID"),"</h1>","</div>",'<div id="agid-spid-idp-list" class="agid-spid-row">',i,"</div>",'<div id="agid-cancel-access-container">','<a id="agid-spid-cancel-access-button" href="#" role="button">','<div id="agid-cancel-access-button" class="agid-transparent-button">',"<span>",this.getI18n("annulla_accesso"),"</span>","</div>","</a>","</div>",'<div id="agid-logo-container" aria-hidden="true">','<img id="agid-logo" class="agid-logo" src="./img/agid-logo-bb-short.png" aria-hidden="true" />',"</div>","</div>","</div>",'<footer id="agid-spid-panel-footer">','<div id="agid-action-button-container">','<a id="nospid" href="#" role="button">','<div class="agid-action-button">',"<span>",this.getI18n("non_hai_SPID"),"</span>","</div>","</a>",'<a id="cosaspid" href="#" role="button">','<div class="agid-action-button">',"<span>",this.getI18n("cosa_SPID"),"</span>","</div>","</a>","</div>","</footer>","</section>"].join("")},spidProviderButton:function(i){return['<span class="agid-spid-col l3 m6 s6 xs12" role="button">','<a href="',i.url,'"','class="agid-spid-idp-button agid-spid-idp-infocertid"','title="',i.title,'"','style="background-image: url(img/idp-logos/',i.logo,')">',"</a>","</span>"].join("")},spidButton:function(i){return["\x3c!-- AGID - SPID BUTTON ",i.toUpperCase()," * begin * --\x3e",'<button class="agid-spid-enter agid-spid-enter-size-',i,'" style="display:none">','<span aria-hidden="true" class="agid-spid-enter-icon">','<img aria-hidden="true" src="img/spid-ico-circle-bb.svg" onerror="this.src=\'img/spid-ico-circle-bb.png\'; this.onerror=null;" alt="',this.getI18n("entra_con_SPID"),'" />',"</span>",'<span class="agid-spid-enter-text">',this.getI18n("entra_con_SPID"),"</span>","</button>","\x3c!-- AGID - SPID BUTTON ",i.toUpperCase()," * end * --\x3e"].join("")},infoModal:function(i){return['<div class="modal-content">','<span id="closemodalbutton" class="close" role="button" tabindex="0" aria-label="',this.getI18n("aria_chiudi_modale"),'"><b aria-hidden="true">&times;</b></span>',"<div>",i,"</div>","</div>"].join("")},nonHaiSpid:function(){return["<ul>","<li>Morbi in sem quis dui placerat ornare. Pellentesque odio nisi, euismod in, pharetra a, ultricies in, diam. Sed arcu. Cras consequat.</li>","<li>Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus.</li>","<li>Phasellus ultrices nulla quis nibh. Quisque a lectus. Donec consectetuer ligula vulputate sem tristique cursus. Nam nulla quam, gravida non, commodo a, sodales sit amet, nisi.</li>","<li>Pellentesque fermentum dolor. Aliquam quam lectus, facilisis auctor, ultrices ut, elementum vulputate, nunc.</li>","</ul>"].join("")},cosaSpid:function(){return["<h1>HTML Ipsum Presents</h1>",'<p><strong>Pellentesque habitant morbi tristique</strong> senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. <em>Aenean ultricies mi vitae est.</em> Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, <code>commodo vitae</code>, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. <a href="#">Donec non enim</a> in turpis pulvinar facilisis. Ut felis.</p>',"<h2>Header Level 2</h2>","<ol>","<li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>","<li>Aliquam tincidunt mauris eu risus.</li>","</ol>","<blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p></blockquote>","<h3>Header Level 3</h3>","<ul>","<li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>","<li>Aliquam tincidunt mauris eu risus.</li>","</ul>"].join("")}},window.AgidSpidEnter.prototype.i18n={},window.AgidSpidEnter.prototype.getI18n=function(i){var e=document.getElementsByTagName("html")[0].getAttribute("lang")||this.i18n["spid-texts"].default,t=this.i18n.language&&this.i18n.language[e]&&this.i18n.language[e][i];return this.i18n.language[e]?this.i18n.language[e][i]||console.error("La chiave richiesta non è disponibile nel locale selezionato:",i):console.error("Il locale richiesto non è disponibile:",e),t||i},window.AgidSpidEnter.prototype.config={providersEndpoint:"/src/data/spidProviders-success.json",localisationEndpoint:"/src/data/spidI18n.json"},window.agidSpidEnter=new window.AgidSpidEnter;